<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Hotel Housekeeping - Habitaciones</title>
  <!-- Indica a Safari que la aplicación puede ejecutarse en modo fullscreen/standalone -->
<meta name="apple-mobile-web-app-capable" content="yes">
<!-- Define el estilo de la barra de estado (hora, batería) en iOS -->
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Icono principal de alta resolución para la pantalla de inicio de iOS -->
<link rel="apple-touch-icon" href="/FrontHotel/images/icons/180.png" sizes="180x180">
<!-- Opcional: Icono sin el efecto de brillo que Safari aplica por defecto (si quieres control
total) -->
<link rel="apple-touch-icon-precomposed"
href="/FrontHotel/images/icons/180.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
  >

  <!-- Estilos propios -->
  <link rel="stylesheet" href="/FrontHotel/styles.css">
</head>
<body class="bg-body-tertiary">

  <!-- =================== NAVBAR =================== -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom shadow-sm small">
    <div class="container-fluid px-4">
      <!-- Logo + nombre app -->
      <div class="d-flex align-items-center gap-2">
        <div class="app-logo rounded-3 d-flex align-items-center justify-content-center">
          <i class="bi bi-buildings"></i>
        </div>
        <span class="fw-semibold fs-6">Hotel Housekeeping</span>
      </div>

      <div class="ms-auto d-flex align-items-center gap-3">
        <!-- Estado online -->
        <div class="d-flex align-items-center gap-2">
          <span class="online-dot rounded-circle"></span>
          <span class="badge rounded-pill online-pill">Online</span>
        </div>
        <!-- Usuario -->
        <div class="d-flex align-items-center gap-2">
          <span class="fw-semibold">Emilio Alpizar García</span>
          <span class="text-muted">（Recepción）</span>
        </div>
        <!-- Icono salir -->
        <button 
  class="btn btn-sm btn-outline-secondary rounded-circle"
  onclick="logout()"
>
  <i class="bi bi-box-arrow-right"></i>
</button>
      </div>
    </div>
  </nav>

  <!-- =================== NAV TABS =================== -->
  <div class="bg-white border-bottom shadow-sm">
    <div class="container-fluid px-4">
      <ul class="nav nav-tabs border-0 mt-2 tab-nav">
  <li class="nav-item">
    <a class="nav-link active" aria-current="page" >Habitaciones</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/FrontHotel/pages/camareras.html">Camareras</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/FrontHotel/pages/incidentes.html">Incidentes</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/FrontHotel/pages/historial.html">Historial</a>
  </li>
</ul>
    </div>
  </div>

  <!-- =================== CONTENIDO PRINCIPAL =================== -->
  <main class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3>Habitaciones</h3>
      <button id="btnNuevaHabitacion" class="btn btn-primary">
        Crear habitación
      </button>
    </div>

    <table class="table table-hover">
      <thead>
        <tr>
          <th># Habitación</th>
          <th>Piso</th>
          <th>Estado</th>
          <th>Limpia Hoy</th>
          <th>Camareras</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="habitaciones-tbody">
        <!-- Se llena por JS -->
      </tbody>
    </table>
  </main>

  <!-- MODAL CREAR / EDITAR HABITACIÓN -->
  <div class="modal fade" id="modalHabitacion" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-slideout modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="modalHabitacionTitle" class="modal-title">Nueva Habitación</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <form id="formHabitacion">
            <input type="hidden" id="habitacionId">

            <div class="row mb-3">
              <div class="col">
                <label class="form-label">Número</label>
                <input type="text" id="numeroInput" class="form-control" required>
              </div>
              <div class="col">
                <label class="form-label">Piso</label>
                <input type="number" id="pisoInput" class="form-control" required>
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Estado</label>
              <select id="estadoSelect" class="form-select">
                <option value="DISPONIBLE">Disponible</option>
                <option value="OCUPADA">Ocupada</option>
                <option value="SUCIA">Sucia</option>
                <option value="INHABILITADA">Inhabilitada</option>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">Camareras Asignadas</label>
              <div id="camarerasContainer" class="border rounded p-2" style="max-height: 200px; overflow-y: auto;">
                <!-- Se llenan los checkboxes por JS -->
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Notas</label>
              <textarea id="notasInput" class="form-control" rows="2"></textarea>
            </div>

            <div id="habitacionError" class="alert alert-danger d-none"></div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" id="btnGuardarHabitacion" class="btn btn-primary">Guardar Cambios</button>
        </div>
      </div>
    </div>
  </div>
  <script src="/FrontHotel/js/auth.js"></script>
  <script>
  // Solo RECEPCION; LIMPIEZA será mandado a camarera-dashboard
  checkAuth(['RECEPCION']);
</script>

  <!-- Bootstrap JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  ></script>
  <script src="/FrontHotel/js/habitaciones.js"></script>
</body>
</html>
